<!-- https://sstephensmcse.github.io/03-JavaScript/23-RPS-Coded.html -->

<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>PRS Game</title>
  </head>
  <body>

    <h1>Lets play Paper, Scissors, Rock</h1>

    <script>
        
        //Initialize the RPS Array and score
        var RPS = ["rock", "paper", "scissors"];
        var score = 0;

        //start the game
        do {            
            //User chooses	
            var userchoice = "";
            do {  
                userchoice = "null"
                userchoice = prompt("do you choose paper, rock, or scissors?").toLowerCase();
            }
            while (RPS.indexOf(userchoice) === -1)            

            //computer chooses:
            var num = Math.floor(Math.random() * 3);
            console.log(num);
            var cpuchoice = RPS[num]            

            //determine winner
            var result = ""
            if (cpuchoice == userchoice) {result = "tied"}

            else if (userchoice == "rock") {
                if (cpuchoice == "paper") {result = "lose"}
                else if (cpuchoice == "scissors") {result = "win"}
            } else if (userchoice == "paper") {  
                if (cpuchoice == "scissors") {result = "lose"}
                if (cpuchoice == "rock") {result = "win"}
            }
            else if (userchoice == "scissors") { 
                if (cpuchoice == "rock") {result = "lose" }		
                else if (cpuchoice == "paper") {result = "win"}
            }

            // print result and tally the score
            if (result == "win") {score += 1}
            else if (result == "lose") {score += -1}
            console.log("user choice: " + userchoice);            
            console.log("cpu: " + cpuchoice);
            console.log("result: " + result);
            console.log("score: " + score);                        
            alert("The computer chose " + cpuchoice + ", you chose " +  userchoice + ", result: " + result + ". Current score is " + score);            
        }
        while (
            // prompt the user to play again
            confirm("Do you want to play again?")
        )
        // final score 
        alert("Final Score: " + score);
        console.log("Score: " + score);

    </script>
    
  </body>
</html>
